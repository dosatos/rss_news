{% extends 'feeds/base.html' %}
{% block css %}
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'feeds/css/style.css' %}" />
{% endblock %}

{% block title %} RSS Feeds {% endblock %}

{% block content %}
    <div class="row">
        <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-1">
            <h5 class="feeds-count-text"> {{ top_message }} </h5>
        </div>
        {% for article in articles %}
        <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-1">
            {% if user.is_authenticated %}
            {% endif %}
            <a href="{{ article.link }}">
                <h4 class="title">{{ article.title }}</h4>
            </a>
            <h5 class="category">Source: {{ article.source.title }} | {{ article.date_published}}</h5>
            <!--TODO: clean the summary by removing <img>. so far truncated -->
            <p class="text">{{ article.body|truncatechars:200 }}</p>
            <div class="row">
                <div class="pull-left col-xs-5">
                    <form method="POST">
                        {% csrf_token %}
                        {% if article in user.bookmarks.all %}
                            <button class="btn-success" type="submit" name="key" value="{{ article.pk }}"> Remove from Bookmarks </button>
                        {% else %}
                            <button class="btn-primary" type="submit" name="key" value="{{ article.pk }}"> Add to Bookmarks </button>
                        {% endif %}
                    </form>
                </div>
                <div class="pull-right col-xs-3">
                    <button class="btn-default"> Comments </button>
                </div>
            </div>
            <br>
            <div class="row">
                <div>
                    {% for comment in comments %}
                        {{ comment.user }}
                        <br>
                        {{ comment.content }}
                        {{ comment.date_added }}
                        <hr>
                    {% endfor %}
                </div>
            </div>
            <hr>
        </div>
        {% endfor %}
    </div>
{% endblock %}